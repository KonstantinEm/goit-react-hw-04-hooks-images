(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{18:function(t,e,a){},43:function(t,e,a){"use strict";a.r(e);var n=a(0),s=a.n(n),c=a(5),r=a.n(c),o=(a(18),a(3)),u=a(8),i=a(10),l=a(11),j=a.n(l),g=(a(39),a(1));function m(){return Object(g.jsx)(j.a,{type:"Bars",color:"#00BFFF",height:80,width:80})}var b=a(9),h=a.n(b),O=a(12),f="18839530-4e500f23cd7e38f757fc7d3b1";function d(){return(d=Object(O.a)(h.a.mark((function t(e,a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://pixabay.com/api/?q=".concat(e,"&page=").concat(a,"&key=").concat(f,"&image_type=photo&orientation=horizontal&per_page=12"));case 2:if(!(n=t.sent).ok){t.next=5;break}return t.abrupt("return",n.json());case 5:return t.next=7,Promise.reject(new Error("No images"));case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var p=function(t,e){return d.apply(this,arguments)},x=a(13),v=(a(42),function(t){var e=t.onSubmit,a=Object(n.useState)(""),s=Object(o.a)(a,2),c=s[0],r=s[1];return Object(g.jsx)("header",{className:"Searchbar",children:Object(g.jsxs)("form",{className:"SearchForm",onSubmit:function(t){t.preventDefault(),e(c)},children:[Object(g.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(g.jsx)(x.a,{})}),Object(g.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:c,onChange:function(t){r(t.target.value)}})]})})}),w=function(t){var e=t.image,a=t.toggleModal;return Object(g.jsx)("li",{className:"ImageGalleryItem",children:Object(g.jsx)("img",{className:"ImageGalleryItemImage",src:e.webformatURL,alt:e.tags,onClick:function(){a({status:!0,src:e.largeImageURL,alt:e.tags})}})})},S=function(t){var e=t.images,a=t.toggleModal;return Object(g.jsx)("ul",{className:"ImageGallery",children:e.map((function(t){return Object(g.jsx)(w,{image:t,toggleModal:a},t.id)}))})};var y=function(t){var e=t.message;return Object(g.jsx)("div",{role:"alert",children:Object(g.jsxs)("p",{children:["Something went wrong. Error: ",e]})})},k=function(t){var e=t.src,a=t.alt,s=t.toggleModal;Object(n.useEffect)((function(){return window.addEventListener("keydown",c),function(){window.removeEventListener("keydown",c)}}));var c=function(t){"Escape"!==t.key&&t.target!==t.currentTarget||s({status:!1})};return Object(g.jsx)("div",{className:"Overlay",onClick:c,children:Object(g.jsx)("div",{className:"Modal",children:Object(g.jsx)("img",{src:e,alt:a})})})},I=function(t){var e=t.onClick;return Object(g.jsx)("button",{type:"button",className:"Button",onClick:e,children:"Load more"})},N=function(){var t=Object(n.useState)([]),e=Object(o.a)(t,2),a=e[0],s=e[1],c=Object(n.useState)(""),r=Object(o.a)(c,2),u=r[0],l=r[1],j=Object(n.useState)(1),b=Object(o.a)(j,2),h=b[0],O=b[1],f=Object(n.useState)(!1),d=Object(o.a)(f,2),x=d[0],w=d[1],N=Object(n.useState)({status:!1,message:""}),E=Object(o.a)(N,2),C=E[0],F=E[1],M=Object(n.useState)({status:!1,targetImage:null}),L=Object(o.a)(M,2),B=L[0],G=L[1],T=Object(n.useState)(!1),q=Object(o.a)(T,2),H=q[0],J=q[1];function P(t,e){if(""===t)return s([]),J(!1),void F({status:!0,message:"Please input search request"});w(!0),F({status:!1,message:""}),p(t,e).then((function(t){var n,c;1===e?s(t.hits):(s((function(e){return[].concat(Object(i.a)(e),Object(i.a)(t.hits))})),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})),n=t.totalHits,c=a.length+t.hits.length,J(n>c),F(n?{status:!1,message:""}:{status:!0,message:"Nothing was found. Try again."}),O((function(t){return t+1}))})).catch((function(t){return F({status:!0,message:"Something wrong: ".concat(t.message)})})).finally((function(){return w(!1)}))}Object(n.useEffect)((function(){O(1),P(u,1)}),[u]);var R=function(t){var e=t.status,a=t.src,n=t.alt;G(e?{status:!0,targetImage:{src:a,alt:n}}:{status:!1,targetImage:null})};return Object(g.jsxs)("div",{children:[Object(g.jsx)(v,{onSubmit:l}),C.status&&Object(g.jsx)(y,{message:C.message}),x&&Object(g.jsx)(m,{}),a.length>0&&Object(g.jsx)(S,{images:a,toggleModal:R}),B.status&&Object(g.jsx)(k,{src:B.targetImage.src,alt:B.targetImage.alt,toggleModal:R}),H&&Object(g.jsx)(I,{onClick:function(){return P(u,h)}})]})};function E(){var t=Object(n.useState)(""),e=Object(o.a)(t,1)[0];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(N,{imageName:e}),Object(g.jsx)(u.a,{autoClose:2e3})]})}r.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(E,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.5872f5be.chunk.js.map